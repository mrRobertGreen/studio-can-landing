function isVisible(e){const t=$(e),i=$(t).offset().top,s=i+$(t).outerHeight(),n=$(window).scrollTop()+$(window).height()/2.5,o=n+$(window).height()/10;return s>n&&i<o}function isVisibleForScrollDown(e){const t=$(e);if(!t.offset())return;return $(t).offset().top<$(window).scrollTop()+$(window).height()/2}function isVisibleForScrollUp(e){const t=$(e);if(!t.offset())return;return $(t).offset().top>$(window).scrollTop()+$(window).height()/2}$(window).on("load",(function(){let e;const t=["services","we","examples","process","vacancies","contacts"];let i=!0,s=0,n=0;if(window.matchMedia("(max-width: 768px)").matches){e=new Sly("#frame",{horizontal:1,speed:300,mouseDragging:1,touchDragging:1,easing:"swing",releaseSwing:!0,swingSpeed:.5}).init()}$("#menu-fake").width($("#menu-services").width()),window.matchMedia("(min-width: 900px)").matches?$(".menu__item").click((async function(){await bigMenuController($(this).attr("id")),s=t.findIndex(e=>"menu-"+e===$(this).attr("id"))})):$(".menu__item").click((async function(){await smallMenuController($(this).attr("id"),e),s=t.findIndex(e=>"menu-"+e===$(this).attr("id"))})),$(window).scroll((function(){window.matchMedia("(min-width: 900px)").matches?$(this).scrollTop()>=86?($(".menu-copy").css("display","block"),$(".menu").addClass("stickytop")):($(".menu").removeClass("stickytop"),$(".menu-copy").css("display","none")):$(this).scrollTop()>=57?($(".menu-copy").css("display","block"),$(".menu").addClass("stickytop")):($(".menu").removeClass("stickytop"),$(".menu-copy").css("display","none"))}));$(".menu__link, .menu__track, .we-are__link, .clouds__item, .process, .offer").on("click",'[href^="#"]',(async function(e){e.preventDefault(),i=!1,"#we"==this.hash?await $("html,body").animate({scrollTop:$(this.hash).offset().top+1},500,"swing",()=>i=!0):await $("html,body").animate({scrollTop:$(this.hash).offset().top-100},500,"swing",()=>i=!0)})),window.addEventListener("load",()=>{for(;isVisibleForScrollDown("#"+t[s]+"-end");)s++,n++;window.matchMedia("(min-width: 900px)").matches?bigMenuController("menu-"+t[s]):smallMenuController("menu-"+t[s],e)});let o=0;$(window).on("scroll",(function(){let a=$(this).scrollTop();if(i){if(a>o){let e=s;for(;isVisibleForScrollDown("#"+t[e]+"-start");)++e;s=-1===e||0===e?0:e-1}else{let e=s;for(;isVisibleForScrollUp("#"+t[e]+"-end");)--e;s=6===e?5:e+1}n!==s&&(n=s,window.matchMedia("(min-width: 900px)").matches?(i=!1,bigMenuController("menu-"+t[s]),setTimeout(()=>{i=!0},300)):(i=!1,smallMenuController("menu-"+t[s],e),setTimeout(()=>{i=!0},300))),o=a}})),$("#textarea").on("input",(function(e){var t;(t=e.target).style.height="auto",t.style.height=t.scrollHeight+0+"px"})),$(".card__main").click((function(e){$(".cards").hasClass("one")&&($(".card__main").not($(this)).removeClass("active"),$(".card__addition").not($(this).next()).slideUp(300)),$(this).toggleClass("active").next().slideToggle(300)}))}));const moveFakeItem=async(e=1,t=300)=>{const i=$(".menu__item_fake");await i.animate({left:e+"px"},t)},bigMenuController=async e=>{$(".menu__item").removeClass("menu__item_active"),$("#"+e).addClass("menu__item_active");const t=$("#menu-fake");switch(e){case"menu-services":await moveFakeItem(3),t.width($("#menu-services").width());break;case"menu-we":await moveFakeItem($("#menu-services").width()+3),t.width($("#menu-we").width());break;case"menu-examples":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+3),t.width($("#menu-examples").width());break;case"menu-process":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+3),t.width($("#menu-process").width());break;case"menu-vacancies":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()+3),t.width($("#menu-vacancies").width());break;case"menu-contacts":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()+$("#menu-vacancies").width()+6),t.width($("#menu-contacts").width())}},smallMenuController=async(e,t)=>{$(".menu__item").removeClass("menu__item_active"),$("#"+e).addClass("menu__item_active");const i=$("#menu-fake");switch(e){case"menu-services":await moveFakeItem($("#menu-we").width()+2),i.width($("#menu-services").width()),t.slideTo(0);break;case"menu-we":await moveFakeItem($("#menu-services").width()+2),i.width($("#menu-we").width()),t.slideTo($("#menu-services").width()/4+2);break;case"menu-examples":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+2),i.width($("#menu-examples").width()),t.slideTo($("#menu-we").width()+$("#menu-we").width()/2+2);break;case"menu-process":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+2),i.width($("#menu-process").width()),t.slideTo($("#menu-we").width()+$("#menu-services").width()+$("#menu-services").width()/2+2);break;case"menu-vacancies":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()+2),i.width($("#menu-vacancies").width()),t.slideTo($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()/2+2);break;case"menu-contacts":await moveFakeItem($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()+$("#menu-vacancies").width()+2),i.width($("#menu-contacts").width()),t.slideTo($("#menu-we").width()+$("#menu-services").width()+$("#menu-examples").width()+$("#menu-process").width()+$("#menu-vacancies").width())}};document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form1"),t=document.getElementById("form2"),i=document.getElementById("form-popup");async function s(e,t){e.preventDefault();let i=new FormData(t);if(0===formValidate(t)){t.classList.add("_sending");let e=await fetch("sendmail.php",{method:"POST",body:i});if(e.ok){await e.json();showSuccessModal(),t.reset(),t.classList.remove("_sending")}else showFailModal(),t.classList.remove("_sending")}}e.addEventListener("submit",t=>s(t,e)),t.addEventListener("submit",e=>s(e,t)),i.addEventListener("submit",e=>s(e,i))}));const showSuccessModal=()=>{$("div.success").hasClass("visible")||($("div.success").addClass("visible"),$("div.success").removeClass("hidden"),setTimeout(()=>{$("div.success").removeClass("visible"),$("div.success").addClass("hidden")},2500))},showFailModal=()=>{$("div.fail").hasClass("visible")||($("div.fail").addClass("visible"),$("div.fail").removeClass("hidden"),setTimeout(()=>{$("div.fail").removeClass("visible"),$("div.fail").addClass("hidden")},2500))};function formValidate(e){let t=0,i=document.querySelectorAll("._req");for(let s=0;s<i.length;s++){const n=i[s];if(isChild(e,n)){if(formRemoveError(n),"checkbox"===n.getAttribute("type")&&!1===n.checked){formAddError(n),t++,n.addEventListener("change",()=>{formRemoveError(n)});break}if(""===n.value){formAddError(n),t++,n.addEventListener("keyup",()=>{formRemoveError(n)});break}}}return t}function formAddError(e){e.parentElement.classList.add("_error")}function formRemoveError(e){e.parentElement.classList.remove("_error")}function isChild(e,t){return!!e.contains(t)}const productsData={research:{id:"research",category:"Быстрый старт",name:"Исследование рынка",price:"9 990 ₽",details:[{title:"Что входит в услугу",items:["— Презентация и видеозапись;","— Анализ фирменного стиля конкурентов;","— Анализ дизайна сайтов и соцсетей конкурентов;","— Анализ рекламы конкурентов;","— Анализ целевой аудитории;","— 3 сценария развития вашего бизнеса."]},{title:"Время разработки",items:["1 день"]},{title:"Процесс работы",items:["1. Обсуждение проекта на консультации;","2. Заключение договора и оплата услуги;","3. Сдача презентации, видеозаписи и сценариев."]}],images:'<img src="../img/services/svg/network_white.svg" class="product-slider__item" />'},logo:{id:"logo",category:"Быстрый старт",name:"Логотип",price:"4 990 ₽",details:[{title:"Что входит в услугу",items:["— Подбор шрифта;","— Цветовая палитра;","— 3 варианта логотипа на выбор;","— Логотип в форматах svg, png, ai, psd;","— Руководство по использованию."]},{title:"Время разработки",items:["1 день"]},{title:"Процесс работы",items:["1. Обсуждение логотипа на консультации;","2. Заключение договора и оплата услуги;","3. Сдача логотипа и руководства к нему."]}],images:'<img src="../img/services/svg/logo_white.svg" class="product-slider__item" />'},analysis:{id:"analysis",category:"Быстрый старт",name:"Анализ проекта",price:"990 ₽",details:[{title:"Что входит в услугу",items:["— Презентация и видеозапись;","— Комментарии дизайнера и маркетолога;","— Рекомендации по улучшению."]},{title:"Время разработки",items:["1 день."]},{title:"Процесс работы",items:["1. Обсуждение проекта на консультации;","2. Заключение договора и оплата услуги;","3. Сдача презентации и видеозаписи с комментариями и рекомендациями."]}],images:'<img src="../img/services/svg/context_white.svg" class="product-slider__item" />'},consultation:{id:"consultation",category:"Быстрый старт",name:"Консультация",price:"0 ₽",details:[],images:'<img src="../img/services/svg/context_white.svg" class="product-slider__item" />'},ids:["research","logo","analysis","consultation"]};let currentProductId="",scrollPos=0,productScrollPos=0;const MENU_ITEM_WIDTH=90,mainBody=document.querySelector("body");$(window).on("load",(function(){new Sly("#product-menu",{horizontal:1,speed:300,mouseDragging:1,touchDragging:1,easing:"swing",releaseSwing:!0,swingSpeed:.5}).init();const e=document.querySelector(".product-popup"),t=document.querySelector("#frame"),i=document.querySelector("#main-container"),s=document.querySelectorAll(".product-menu__item"),n=document.querySelector(".form-popup"),o=document.querySelector("._popup-textarea > textarea"),a=()=>{const a=window.location.hash;Object.keys(productsData).forEach(n=>{if(a==="#"+n){if(scrollPos=window.pageYOffset,e.classList.remove("hidden"),window.innerWidth<=600&&i.classList.add("hidden"),window.innerWidth>=1100){const e=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";mainBody.style.paddingRight=e}t.classList.add("hidden"),mainBody.style["overflow-y"]="hidden",(e=>{if(e!==currentProductId){currentProductId=e;const t='<div class="products-dots">\n        <div class="products-dots__dot"></div>\n        <div class="products-dots__dot"></div>\n        <div class="products-dots__dot"></div>\n      </div>\n',i=document.querySelector(".product__title"),n=document.querySelector(".product-details-wrapper"),o=document.querySelector("#product-slider"),a=document.querySelector(".product__category"),d=document.querySelector(".arrow-wrapper.prev"),c=document.querySelector(".arrow-wrapper.next"),r=productsData.ids.findIndex(t=>t===e);if(0!==r){const e=productsData.ids[r-1];d.style.opacity=1,d.setAttribute("href","/#"+e)}else d.setAttribute("href","/#back"),d.style.opacity=0;if(r!==productsData.ids.length-1){const e=productsData.ids[r+1];c.style.opacity=1,c.setAttribute("href","/#"+e)}else c.setAttribute("href","/#back"),c.style.opacity=0;i.innerHTML=productsData[e].name,a.innerHTML=productsData[e].category,o.innerHTML=productsData[e].images,s.forEach((t,i)=>{t.id==="menu_"+e?t.classList.add("active"):t.classList.remove("active")}),n.innerHTML="",productsData[e].details.forEach((i,s)=>{const o=document.createElement("div");o.classList.add("product-details");const a=`<div class="product-details__title">${i.title}</div>`;let d="";i.items.forEach((t,i)=>{s===productsData[e].details.length-1&&0===i?d+=`<p class="mb-21">${t}</p>`:d+=`<p>${t}</p>`}),o.innerHTML=a+d,s===productsData[e].details.length-1&&(n.innerHTML+=t),n.appendChild(o)})}})(n)}}),"#back"===a&&(history.pushState("",document.title,window.location.pathname+window.location.search),t.classList.remove("hidden"),i.classList.remove("hidden"),e.classList.add("hidden"),mainBody.style.paddingRight="0px",mainBody.style["overflow-y"]="auto",window.scrollTo(0,scrollPos)),"#back-to-product"===a&&(history.pushState("",document.title,window.location.pathname+window.location.search),n.classList.add("hidden")),"#form"===a&&(currentProductId?(()=>{let e;n.classList.remove("hidden");const t=productsData[currentProductId].name;switch(currentProductId){case"consultation":e="Я хочу консультациию";break;default:e="Я хочу "+t.toLowerCase()}o.value=e})():history.pushState("",document.title,window.location.pathname+window.location.search))};a(),window.addEventListener("hashchange",a)}));